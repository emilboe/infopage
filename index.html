<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>i</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: black;
            color: white;
            font-size: 120px;
            font-family: 'Orbitron', monospace;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            position: relative;
            overflow: hidden;
        }
        #time {
            text-align: left;
            margin-bottom: 40px;
            width: 8ch;
            display: inline-block;
            transform: translateX(12%);
        }
        #date {
            text-align: center;
            font-size: 80px;
            margin-bottom: 40px;
        }
        #weather {
            text-align: center;
            font-size: 60px;
        }
        .star {
            position: absolute;
            color: rgb(154, 247, 253);
            font-size: 15px;
            animation: twinkle 3s infinite;
            pointer-events: none;
            transition: opacity 0.1s;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="time"></div>
    <div id="date"></div>
    <div id="weather"></div>
    <script>
        // Configuration - Trondheim, Norway
        const LATITUDE = 63.4305; // Trondheim latitude
        const LONGITUDE = 10.3951; // Trondheim longitude
        
        function updateDateTime() {
            const now = new Date();
            
            // Format time as HH:MM:SS with consistent width
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            // Format date as DD.MM.YY with dots
            const day = String(now.getDate()).padStart(2, '0');
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const year = String(now.getFullYear()).slice(-2); // Last 2 digits of year
            const dateString = `${day}.${month}.${year}`;
            
            document.getElementById('time').textContent = timeString;
            document.getElementById('date').textContent = dateString;
        }
        
        async function fetchWeather() {
            try {
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${LATITUDE}&longitude=${LONGITUDE}&current=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto`
                );
                const data = await response.json();
                
                if (data.current) {
                    const temp = Math.round(data.current.temperature_2m);
                    const weatherCode = data.current.weather_code;
                    
                    // Convert weather code to description
                    const weatherDescriptions = {
                        0: 'Clear', 1: 'Mostly clear', 2: 'Partly cloudy', 3: 'Overcast',
                        45: 'Foggy', 48: 'Foggy', 51: 'Light drizzle', 53: 'Drizzle', 55: 'Heavy drizzle',
                        56: 'Freezing drizzle', 57: 'Freezing drizzle', 61: 'Light rain', 63: 'Rain', 65: 'Heavy rain',
                        66: 'Freezing rain', 67: 'Freezing rain', 71: 'Light snow', 73: 'Snow', 75: 'Heavy snow',
                        77: 'Snow grains', 80: 'Light showers', 81: 'Showers', 82: 'Heavy showers',
                        85: 'Snow showers', 86: 'Snow showers', 95: 'Thunderstorm', 96: 'Thunderstorm', 99: 'Thunderstorm'
                    };
                    
                    const description = weatherDescriptions[weatherCode] || 'Unknown';
                    document.getElementById('weather').textContent = `${temp}°C - ${description}`;
                }
            } catch (error) {
                document.getElementById('weather').textContent = 'Weather unavailable';
            }
        }
        
        function moveStar(star) {
            // Move star to new random position
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
        }
        
        function createStars() {
            // Remove existing stars
            const existingStars = document.querySelectorAll('.star');
            existingStars.forEach(star => star.remove());
            
            const numStars = 15;
            const body = document.body;
            
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = '✦';
                
                // Random positions scattered across the page
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                
                // Random animation delay so stars don't all blink at once
                const delay = Math.random() * 3;
                star.style.animationDelay = delay + 's';
                
                // Track if we've moved this star when it reaches 0 opacity
                star.movedAtZero = false;
                
                body.appendChild(star);
            }
        }
        
        function checkStars() {
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                // Get computed style to check current opacity
                const computedStyle = window.getComputedStyle(star);
                const opacity = parseFloat(computedStyle.opacity);
                
                // If opacity is at or near 0 and we haven't moved this star yet
                if (opacity < 0.1 && !star.movedAtZero) {
                    moveStar(star);
                    star.movedAtZero = true;
                }
                // Reset flag when opacity comes back up
                else if (opacity > 0.5 && star.movedAtZero) {
                    star.movedAtZero = false;
                }
            });
        }
        
        // Initialize
        updateDateTime();
        setInterval(updateDateTime, 1000);
        createStars();
        fetchWeather();
        // Update weather every 30 minutes
        setInterval(fetchWeather, 30 * 60 * 1000);
        // Check stars periodically to detect when they reach 0 opacity
        setInterval(checkStars, 50);
    </script>
</body>
</html>